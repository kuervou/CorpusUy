---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";

type Props = {
  entry: CollectionEntry<"news">;
};

const { entry } = Astro.props;
const { title, excerpt, cover, coverAlt, date, tags } = entry.data;

const href = `/novedades/${entry.slug}/`;

const prettyDate = new Intl.DateTimeFormat("es-UY", {
  year: "numeric",
  month: "long",
  day: "2-digit",
}).format(date);
---

<article class="grid md:grid-cols-[320px_1fr] gap-5 rounded-2xl bg-zinc-900/60 ring-1 ring-white/10 overflow-hidden">
  <a href={href} class="block relative aspect-[16/10] md:aspect-auto md:h-full">
    <Image
      src={cover}
      alt={coverAlt || title}
      class="h-full w-full object-cover hover:scale-[1.02] transition-transform duration-300"
      loading="lazy"
    />
  </a>

  <div class="p-5">
    <p class="text-xs text-zinc-400">{prettyDate}</p>
    <h3 class="mt-1 text-xl font-semibold text-light leading-snug">
      <a href={href} class="hover:underline underline-offset-4">{title}</a>
    </h3>

    <p class="mt-3 text-zinc-300 leading-relaxed">
      {excerpt}
    </p>

    {tags?.length ? (
      <div class="mt-4 flex flex-wrap gap-2">
        {tags.map((t: string) => (
          <span class="text-xs px-2 py-1 rounded-full bg-black/30 ring-1 ring-white/10 text-zinc-300">
            #{t}
          </span>
        ))}
      </div>
    ) : null}

    <div class="mt-5">
      <a href={href} class="inline-flex items-center gap-2 text-sm text-light underline underline-offset-4">
        Leer nota â†’
      </a>
    </div>
  </div>
</article>
